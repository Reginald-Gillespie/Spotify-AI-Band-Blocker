(async()=>{for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(e=>setTimeout(e,10));var e;e=async function(){for(;null==Spicetify||!Spicetify.Player||null==Spicetify||!Spicetify.Menu||null==Spicetify||!Spicetify.LocalStorage;)await new Promise(e=>setTimeout(e,100));let t={url:"https://raw.githubusercontent.com/romiem/ai-bands/main/ai-bands.json",cacheKey:"ai-bands:list",timeKey:"ai-bands:ts",enabledKey:"ai-bands:enabled",ttl:864e5},e,i=new Set,a="true"===Spicetify.LocalStorage.get(t.enabledKey);{var o=Date.now(),c=(c=Spicetify.LocalStorage.get(t.timeKey))?parseInt(c):0,r=Spicetify.LocalStorage.get(t.cacheKey);let e=[];if(r)try{e=JSON.parse(r)}catch(e){console.error("[AI Blocker] Cache parse error",e)}if(o-c>t.ttl||0===e.length){console.log("[AI Blocker] Fetching new blocklist...");try{var n=await fetch(t.url);if(!n.ok)throw new Error("HTTP error! status: "+n.status);var l=(await n.json()).map(e=>"string"==typeof e?e:"object"==typeof e&&e.name?e.name:null).filter(e=>null!==e);0<l.length&&(e=l,Spicetify.LocalStorage.set(t.cacheKey,JSON.stringify(e)),Spicetify.LocalStorage.set(t.timeKey,o.toString()),console.log(`[AI Blocker] Updated cache with ${e.length} artists.`))}catch(e){console.error("[AI Blocker] Fetch failed, using cached data if available.",e)}}i=new Set(e.map(e=>e.toLowerCase().trim()))}function s(){var e;a&&(e=Spicetify.Player.data,console.log(e.item.artists),e)&&e.item&&e.item.artists&&(e=e.item.artists.map(e=>e.name.toLowerCase().trim()).find(e=>i.has(e)))&&Spicetify.Player.isPlaying()&&(console.log(`[AI Blocker] Detected AI Artist: ${e}. Skipping...`),Spicetify.Player.next(),Spicetify.showNotification("Skipped AI Band: "+e.toUpperCase()))}await 0,new Spicetify.Menu.Item("Skip AI Bands",a,e=>{a=!a,Spicetify.LocalStorage.set(t.enabledKey,a.toString()),e.setState(a),Spicetify.showNotification("AI Blocking "+(a?"ON":"OFF")),a&&s()}).register(),Spicetify.Player.addEventListener("songchange",function(){e&&clearTimeout(e),e=setTimeout(s,450)}),s()},(async()=>{await e()})()})();